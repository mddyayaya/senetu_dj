<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <meta http-equiv="page-Enter" content="revealTrans(Duration=3.0,Transition=23)">
		<link rel="stylesheet" type="text/css" href="lib/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
		<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
		<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/setCookie.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<title>专题培训</title>
		<style type="text/css">
			.mainBody{
				overflow-y: scroll;
			}
			.contList{
				height: auto;
			}
		</style>
	</head>
	<body>
		<script src="js/nav.js" type="text/javascript" charset="utf-8"></script>
		<div class="mainBody" id="app" v-cloak>
			<div class="searchBox">
				<div id="">
					<span class="allIcon"></span>
					<div class="fenlei" :class="fenleiSelect == 1?'fenleiSelect':''" @click="fenleiSelect=1;importClass()">专题培训</div>
					<div class="fenlei" :class="fenleiSelect == 2?'fenleiSelect':''" @click="fenleiSelect=2;importClass()">自建专题</div>
				</div>
			</div>
			<!-- 内容列表 -->
			<div class="contList">
				<!-- 此处循环 -->
				<div>
					<div class="contListItem1"
					 style="height: 32vh;"
					 v-for="(item,index) in recommend">
						<div class="topImg" style="height: 20vh;">
							<img :src="item.sz_img||item.img">
						</div>
						<div class="bottomWords1" style="height: 10vh;">
							<div class="bbTit" style="height: 4vh;">{{item.title}}</div>
							<div class="bbbtn1" style="margin-top: 1vh;">
								<div></div>
								<div @click="jumpDetail(item.bs_id,item.id)">开始学习</div>
								
							</div>
						</div>
					</div>
					<div class="null" v-show="recommend.length == 0">暂无数据</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			window.onload = function(){
				var app = new Vue({
					el:"#app",
					data:{
						step:1,
						fenleiSelect:1,
						flag:user.flag,
						// 集中学习数据循环
						dataList:[],
						// 最新推荐
						recommend:[],
						studyName:"集中学习",
						// 滚动加载
						onFetching:false,
						// 个人学习
						dataSingle:{
							page:1,
							user_id: user.id,
							title:"", 
							year:"",
							month:"",
						},
						// 个人学习
						dataSingle:{
							page:1,
							user_id: user.id,
							title:"", 
							year:"",
							month:"",
						},
						// 集中学习
						dataJizhong:{
							page:1,
							user_id: user.id,
							flag:user.flag,
							title:"", 
							year:"",
							month:"",
							type:"",
							status:"",
							focus:1
						}
					},
					methods:{
						// 开始活动
						startActive(){
							var that = this;
							window.location.href = 'jzxx_detail.html'
						},
						// 活动中资源详情
						showStudyDetail(){
							var that = this;
							window.location.href = 'detailClass.html'
						},
						importClass(){
							var that = this;
							that.recommend = [];
							// 专题培训
							if(that.fenleiSelect==1){
								postData("ztpxList",{user_id:user.id,flag:user.flag},function(res){
									if(res.code == 200){
										if(res.data != null){
											that.recommend = res.data
										}
									}
								})
							}else{
								// 自建专题
								postData("mySpecial",{user_id:user.id,flag:user.flag},function(res){
									if(res.code == 200){
										if(res.data != null){
											that.recommend = res.data
										}
									}
								})
							}
						},
						// 开始学习
						jumpDetail(bsid,id){
							var that = this;
							if(that.fenleiSelect == 1){
								window.location.href = 'ztpx_detail.html?sid='+id+'&type=dj'
							}else{
								window.location.href = 'ztpx_detail.html?sid='+id+'&type=zj'
							}
						},
					},
					created() {
						var that = this;
						that.importClass();
						if(user.dwid == 333){
							$('.topNavBar2 .topNavItem').eq(4).addClass("topNavselect").siblings().removeClass('topNavselect');
						}else{
							$('.topNavBar1 .topNavItem').eq(1).addClass("topNavselect").siblings().removeClass("topNavselect");
						}
					}
				})
			}
		</script>
	</body>
</html>
