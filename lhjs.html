<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>两会精神</title>
		<link rel="stylesheet" type="text/css" href="css/lhjs.css"/>
		<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
		<link rel="stylesheet" type="text/css" href="lib/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="css/selectbox.css"/>
	</head>
	<body>
		<!-- 遮罩 -->
		<div id="app" v-cloak>
			<div class="blackMark" onclick="closeBag()"></div>
			<!-- 头 -->
			<div class="top-nav">
				<div class="control">
					<a href="javascript:history.back(-1)"><i class="fa fa-mail-reply" aria-hidden="true"></i>返回&nbsp;&nbsp;|&nbsp;</a>
					<a href="javascript:window.location='app.html';"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
				</div>
				<div class="words" style="width: 61%;margin-left: 7%;">
					<img src="statics/images/lhjsbg.png" style="width: 100%;">
				</div>
				<div class="icon">
					<div class="icon_item1">
						<div class="icon_item"></div>
						<div class="word_item">十三届全国人大五次会议</div>
					</div>
					<div class="icon_item1">
						<div class="icon_item"></div>
						<div class="word_item">全国政协十三届五次会议</div>
					</div>
				</div>
				<div class="search-box">
					<a class="search">搜索</a>
					<input type="text" v-model="searchBox"/><i @click="search" class="fa fa-search" aria-hidden="true"></i>
					<span class="select"  @click="openSelect"><i  class="fa fa-filter" aria-hidden="true"></i>筛选</span>
				</div>
				<div class="nav">
					<div class="left">
						<div class="year">{{getSoucre.year}}</div>
						<div class="title">聚焦两会</div>
						<div class="english"></div>
						<p>NPC & NPPC</p>
					</div>
					<ul class="right">
						<div @click="goNav(1)"><li :class="selectNav == 1?'bgclass':''"></li><span :class="selectNav == 1?'borderclass':''">主席足迹</span></div>
						<div @click="goNav(7)"><li :class="selectNav == 7?'bgclass':''"></li><span :class="selectNav == 7?'borderclass':''">两会学习</span></div>
						<div @click="goNav(6)"><li :class="selectNav == 6?'bgclass':''"></li><span :class="selectNav == 6?'borderclass':''">两会知识</span></div>
						<div @click="goNav(2)"><li :class="selectNav == 2?'bgclass':''"></li><span :class="selectNav == 2?'borderclass':''">热议看点</span></div>
						<div @click="goNav(3)"><li :class="selectNav == 3?'bgclass':''"></li><span :class="selectNav == 3?'borderclass':''">两会报告</span></div>
						<div @click="goNav(4)"><li :class="selectNav == 4?'bgclass':''"></li><span :class="selectNav == 4?'borderclass':''">历次两会</span></div>
					</ul>
				</div>
				<!-- <div class="lhlogo" val="6" @click="goNav(6)"></div> -->
			</div>
			<!-- body -->
			<div class="select-bar" v-show="selectBox == true">
				<div class="layui-form">
				  <div class="layui-form-item">
					<label class="layui-form-label" style="width: 8vw;font-size: 2vh;padding-left: 0;line-height: 3vh;">选择资源类型:</label>
					<div class="layui-input-block">
					  <input type="radio" name="typeSelect" value="" title="全部" checked lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="3" title="视频" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="4" title="音频" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="2" title="图文" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="1" title="PPT" lay-filter="beshared">
					</div>
				  </div>
				</div>
			</div>
			<!-- 主体 -->
			<div class="main-body" id="main-body" :class="selectBox == true?'showTop':''">
				<div class="main-body1">
					<div class="main-body-item body-item" v-for="item in dataBagList" @click="showDetail(12,item.title,item.ftid,item.id)"><a><img :src="item.img"/></a><span>{{item.title}}</span></div>
				</div>
			</div>
			<!-- 展开资源包 -->
			<div class="resource-packages">
				<div class="close-icon" onclick="closeBag()">×</div>
				<div class="select-content">
				<div class="name1">第一批</div>
					<div class="select-content-item">
						<div class="main-body-item body-item1" id="PPT1"><a><img src="statics/images/index1.jpg"/></a><a class="tips">PPT</a><span>习近平新时代中国特色社会主义理论体系</span></div>
					</div>
				</div>
			</div>
			<!-- 搜索结果为空 -->
			<div class="null" v-show="dataBagList.length == 0">未找到您要搜索的内容</div>
		</div>
	</body>
	<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		window.onload = function(){
			var app = new Vue({
				el:"#app",
				data:{
					// 导航样式
					selectNav:1,
					// 数据
					getSoucre:{
						template:12,
						kw:"",
						ft_id:1,
						year:2022
					},
					// 数据
					selectBox:"",
					// 输入框搜索
					searchBox:"",
					// 数据池
					dataBagList:[],
					isYear:false
				},
				methods:{
					// 导航数据渲染
					goNav(index){
						var that = this;
						that.selectNav = index;
						if(index != 5){
							that.getSoucre.ft_id = index;
							that.dataBag();
						}else{
							if(that.isYear == false){
								that.getSoucre.year = that.getSoucre.year-1							
								that.isYear = true;
							}else{
								that.getSoucre.year = that.getSoucre.year+1;						
								that.isYear = false;
							}
							that.dataBag();
						}
					},
					// 打开筛选框
					openSelect(){
						var that = this;
						if(that.selectBox == true){
							that.selectBox = false;
							that.selectNum = 0;
						}else{
							that.selectBox = true
						}
					},
					// 聚焦搜索
					search(){
						var that = this;
						that.getSoucre.kw = that.searchBox;
						that.dataBag();
					},
					// 资源包
					dataBag(){
						var that = this;
						that.dataBagList = [];
						postData("special",that.getSoucre,function(res){
							if(res.code == 200){
								that.dataBagList = res.data.cate_r
							}
						})
					},
					// 打开资源包
					showDetail(template,title,ft_id,rid){
						openBag(template,title,ft_id,rid)
					}
				},
				mounted() {
					var that = this;
					// 初始化layui框架
					layui.use(['layer','form'],function(){
						var layer = layui.layer;
						var form = layui.form;
						form.on('radio(beshared)', function (data) {
							that.selectNum = data.value;
							that.getSoucre.bsid = data.value;
							that.dataBag();
							form.render();
						})
					})
				},
				created() {
					var that = this;
					that.dataBag();
					// 回车键搜索
					$(document).keydown(function(event){
						if(event.keyCode == 13){
							if(event.keyCode == 13){
								that.getSoucre.kw = that.searchBox;
								that.dataBag();
							}
						}
					})
				}
			})
		}
	</script>
</html>
