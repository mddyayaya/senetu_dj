<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>支部建设</title>
		<link rel="stylesheet" type="text/css" href="css/zbjs.css"/>
		<link rel="stylesheet" type="text/css" href="css/selectbox.css"/>
		<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
		<link rel="stylesheet" type="text/css" href="lib/layui/css/layui.css"/>
	</head>
	<body>
		<div class="top-nav">
			<div class="control">
				<a href="javascript:history.back(-1)"><i class="fa fa-mail-reply" aria-hidden="true"></i>返回&nbsp;&nbsp;|&nbsp;</a>
				<a href="javascript:window.location='app.html';"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
			</div>
		</div>
		<div id="idzhjsHtml" v-cloak>
			<div class="zbjsLeft">
				<div class="leftTop"></div>
				<div class="leftL"><img :src="leftBg" alt=""></div>
				<div class="leftR">
					<ul>
						<li class="title" :class="selectBarIndex == 1?'yc':''" @click="changeWord(1,'政治建设')">政治建设<span :class="selectBarIndex == 1?'lihover':''"></span></li>
						<li class="title" :class="selectBarIndex == 2?'yc':''" @click="changeWord(2,'思想建设')">思想建设<span :class="selectBarIndex == 2?'lihover':''"></span></li>
						<li class="title" :class="selectBarIndex == 3?'yc':''" @click="changeWord(3,'组织建设')">组织建设<span :class="selectBarIndex == 3?'lihover':''"></span></li>
						<li class="title" :class="selectBarIndex == 4?'yc':''" @click="changeWord(4,'作风建设')">作风建设<span :class="selectBarIndex == 4?'lihover':''"></span></li>
						<li class="title" :class="selectBarIndex == 5?'yc':''" @click="changeWord(5,'纪律建设')">纪律建设<span :class="selectBarIndex == 5?'lihover':''"></span></li>
						<li class="title" :class="selectBarIndex == 6?'yc':''" @click="changeWord(6,'制度建设')">制度建设<span :class="selectBarIndex == 6?'lihover':''"></span></li>
					</ul>
				</div>
			</div>
			<div class="zbjsRight">
				<div class="zbjsRt">
					<div class="leftTit">
						<span></span>
						<span></span>
						<span>{{topTitle}}</span>
					</div>
					<div class="searchBox">
						<div class="searchItem"><label>搜索</label><input v-model="searchBox" type="text"><i class="fa fa-search" aria-hidden="true" @click="search"></i></div>
						<div class="selectWord" @click="openSelect"><i class="fa fa-filter" aria-hidden="true"></i><span >筛选</span><span style="display: none;">收起</span></div>
					</div>
					<div class="select-bar" v-show="selectBox == true">
						<div class="layui-form">
						  <div class="layui-form-item">
							<label class="layui-form-label" style="width: 8vw;font-size: 2vh;padding-left: 0;line-height: 3vh;">选择资源类型:</label>
							<div class="layui-input-block">
							  <input type="radio" name="typeSelect" value="" title="全部" checked lay-filter="beshared">
							  <input type="radio" name="typeSelect" value="3" title="视频" lay-filter="beshared">
							  <input type="radio" name="typeSelect" value="4" title="音频" lay-filter="beshared">
							  <input type="radio" name="typeSelect" value="2" title="图文" lay-filter="beshared">
							  <input type="radio" name="typeSelect" value="1" title="PPT" lay-filter="beshared">
							</div>
						  </div>
						</div>
					</div>
				</div>
				<div class="zbjsRb" :class="selectBox == true?'showTop':''">
					<ul>
						<li v-for="(item,index) of dataBagList" @click="showDetail(item.id,item.bs_id)"><img  alt="" :src="item.img"><span>{{item.title}}</span></li>
					</ul>
				</div>
				<div class="null" v-show="dataBagList.length == 0">未找到您要搜索的内容</div>
				<div class="footLogo"></div>
			</div>
		</div>
	</body>
	<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		new Vue({
			el:"#idzhjsHtml",
			data:{
				// get数据传参
				getSoucre:{
					template:7,
					ft_id:"1",
					kw:"",
					bsid:""
				},
				selectBox:false,
				// 默认左侧展开
				selectIndex:0,
				// 资源包
				bag:false,
				// 选中导航
				selectBarIndex:1,
				// 搜索框搜索
				searchBox:'',
				// 顶部标题
				topTitle:'政治建设',
				// 数据包
				dataBagList:[],
				// 左侧图片
				leftBg:"statics/images/zbjs1.png"
			},
			methods:{
				// 打开筛选框
				openSelect(){
					var that = this;
					if(that.selectBox == true){
						that.selectBox = false;
						that.selectNum = 0
					}else{
						that.selectBox = true
					}
				},
				// 左侧导肮
				changeWord(index,topTitle){
					var that = this;
					that.selectBarIndex = index;
					that.getSoucre.ft_id = index;
					that.topTitle = topTitle;
					that.leftBg = 'statics/images/zbjs'+index+'.png';
					that.dataBag();
				},
				// 资源包
				dataBag(){
					var that = this;
					that.dataBagList = [];
					postData("special",that.getSoucre,function(res){
						if(res.code == 200){
							if(res.data.inca.length != 0){
								that.dataBagList = res.data.inca;
							}else{
								
							}
						}
					})
				},
				// 聚焦搜索
				search(){
					var that = this;
					that.getSoucre.kw = that.searchBox;
					that.dataBag();
				},
				// 资源详情
				showDetail(id,bsid){
					showDetail(bsid,id,3,1)
				}
			},
			mounted() {
				var that = this;
				// 初始化layui框架
				layui.use(['layer','form'],function(){
					var layer = layui.layer;
					var form = layui.form;
					form.on('radio(beshared)', function (data) {
						that.selectNum = data.value;
						that.getSoucre.bsid = data.value;
						that.dataBag();
						form.render();
					})
				})
			},
			created() {
				var that = this;
				var ftid = getUrlParam("ftid");
				var type = getUrlParam("type");
				that.dataBag();
				if(type == "isBag"){
					var id = getUrlParam("id");
					var title = getUrlParam("title");
					openBag(5,title,ftid,id)
				}
				// 回车键搜索
				$(document).keydown(function(event){
					if(event.keyCode == 13){
						that.getSoucre.kw = that.searchBox;
						that.dataBag();
					}
				})
			}
		})
	</script>
</html>
