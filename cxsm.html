<!doctype html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>不忘初心，牢记使命</title>
<link rel="stylesheet" type="text/css" href="lib/layui/css/layui.css"/>
<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
<link rel="stylesheet" type="text/css" href="css/bwcx.css"/>
<link rel="stylesheet" type="text/css" href="css/selectbox.css"/>
<style type="text/css">
	.active{
		color: rgb(201,29,13);
		font-weight: 700;
		font-size: 2.2vh;
	}
</style>
</head>
	<body>
		<div id="app" v-cloak>
			<!-- 遮罩 -->
			<div class="blackMark" onclick="closeBag()"></div>
			<!-- 顶部 -->
			<div class="nav-top">
				<div class="control">
					<a href="javascript:window.location='app.html';"><i class="fa fa-mail-reply" aria-hidden="true"></i>返回&nbsp;&nbsp;|&nbsp;</a>
					<a href="javascript:window.location='app.html';"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
				</div>
				<div class="clouds">
					<span class="clouds_one" ></span>
					<span class="clouds_two"></span>
					<span class="clouds_three"></span>
				</div>
			</div>
			<div class="nav-box">
				<div class="nav-box-item" v-for="(item,index) in topData" :class="topbarSelect == index?'selectTopBar':''" @click="selectData(index,item.type,item.id)">
					<img :src="item.fl_pic" alt="图片火速加载中"/>
					<p>{{item.type}}</p>
				</div>
			</div>
			<div class="wrap">
				<span class="part1"><span>{{topbarSelectWords}}</span></span>
				<span class="part2">
					<span><a>搜索</a></span>
					<span><input v-model="searchBox" class="search" type="text" /><i  @click="search"class="fa fa-search" aria-hidden="true"></i></span>
					<span class="selectbar-open" @click="openSelect"><i class="fa fa-filter" aria-hidden="true"></i><a>筛选</a></span>
				</span>
			</div>
			<div class="select-bar" v-show="selectBox == true">
				<div class="layui-form">
				  <div class="layui-form-item">
					<label class="layui-form-label" style="width: 8vw;font-size: 2vh;padding-left: 0;line-height: 3vh;">选择资源类型:</label>
					<div class="layui-input-block">
					  <input type="radio" name="typeSelect" value="" title="全部" checked lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="3" title="视频" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="4" title="音频" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="2" title="图文" lay-filter="beshared">
					  <input type="radio" name="typeSelect" value="1" title="PPT" lay-filter="beshared">
					</div>
				  </div>
				</div>
			</div>
			<!-- 主体 -->
			<div class="main-body" id="main-body" :class="selectBox == true?'showTop':''">
				<div class="main-body1">
					<div class="main-body-item body-item" v-for="item in dataBagList" @click="showDetail(1,item.title,item.ftid,item.id)"><a><img :src="item.img"/></a><span>{{item.title}}</span></div>
				</div>
				<!-- 搜索结果为空 -->
				<div class="null" style="top: 0vh;" v-show="dataBagList == null || dataBagList.length == 0">未找到您要搜索的内容</div>
			</div>
			<!-- 展开资源包 -->
			<div class="resource-packages">
				<div class="close-icon" onclick="closeBag()">×</div>
				<div class="select-content">
				<div class="name1">第一批</div>
					<div class="select-content-item">
						<div class="main-body-item body-item1" id="PPT1"><a><img src="statics/images/index1.jpg"/></a><a class="tips">PPT</a><span>习近平新时代中国特色社会主义理论体系</span></div>
					</div>
				</div>
				<!-- 搜索结果为空 -->
				<div class="null" v-show="dataBagList == null || dataBagList.length == 0">未找到您要搜索的内容</div>
			</div>
		</div>
		<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script src="lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script>
			var app = new Vue({
				el:"#app",
				data:{
					// 资源筛选框
					selectBox:false,
					// 顶部导航
					topData:[],
					// get数据传参
					getSoucre:{
						template:1,
						ft_id:""
					},
					//顶部导航选中
					topbarSelect:0,
					// 顶部导航选中左侧变化
					topbarSelectWords:"十九届五中全会",
					// 筛选值
					selectNum:0,
					// 空数据
					isNull:false,
					// 搜索框搜索
					searchBox:'',
					// 数据包
					dataBagList:[]
				},
				methods:{
					// 打开筛选框
					openSelect(){
						var that = this;
						if(that.selectBox == true){
							that.selectBox = false;
							that.selectNum = 0;
						}else{
							that.selectBox = true
						}
					},
					//顶部资源切换
					selectData(index,word,id){
						var that = this;
						that.topbarSelect = index
						that.topbarSelectWords = word;
						that.getSoucre.ft_id = id;
						that.dataBag();
					},
					// 聚焦搜索
					search(){
						var that = this;
						that.getSoucre.kw = that.searchBox;
						that.dataBag();
					},
					// 资源包
					dataBag(){
						var that = this;
						that.dataBagList = [];
						postData("special",that.getSoucre,function(res){
							if(res.code == 200){
								if(res.data.res.length != 0){
									that.topData = res.data.concate;
									that.dataBagList = res.data.res;
									console.log(that.dataBagList)
								}else{
									
								}
							}
						})
					},
					// 打开资源包
					showDetail(template,title,ft_id,rid){
						openBag(template,title,ft_id,rid)
					}
				},
				mounted() {
					var that = this;
					// 初始化layui框架
					layui.use(['layer','form'],function(){
						var layer = layui.layer;
						var form = layui.form;
						form.on('radio(beshared)', function (data) {
							that.selectNum = data.value;
							that.getSoucre.bsid = data.value;
							that.dataBag();
							form.render();
						})
					})
				},
				created() {
					var that = this;
					that.dataBag();
					// 回车键搜索
					$(document).keydown(function(event){
						if(event.keyCode == 13){
							that.getSoucre.kw = that.searchBox;
							that.dataBag();
						}
					})
				}
			})
		</script>
	</body>
</html>