<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>精准扶贫</title>
		<link rel="stylesheet" type="text/css" href="css/jzfp.css"/>
		<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
		<link rel="stylesheet" type="text/css" href="lib/layui/css/layui.css"/>
		<link rel="stylesheet" type="text/css" href="css/selectbox.css"/>
		<style type="text/css">
			body{
				height: 100%;
				width: 100%;
				background: url(statics/images/jzfp_bg.png) no-repeat !important;
				background-size: 100% 100% !important;
			}
			.main_body {
			    background: none;
				overflow-x: hidden;;
				overflow-y: scroll;
				margin-top: 2vh;
			}
		</style>
	</head>
	<body>
		<!-- 顶部 -->
		<!-- 遮罩 -->
		<div class="blackMark" onclick="closeBag()"></div>
		<div class="top-nav">
			<div class="control">
				<a href="javascript:history.back(-1)"><i class="fa fa-mail-reply" aria-hidden="true"></i>返回&nbsp;&nbsp;|&nbsp;</a>
				<a href="javascript:window.location='app.html';"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
			</div>
		</div>
		<div id="app" v-cloak>
			<div class="nav">
				<ul>
					<li @click="jumpList(1)"><span>扶贫路上</span>|</li>
					<li @click="jumpList(2)"><span>政策解读</span>|</li>
					<li @click="jumpList(3)"><span>扶贫案例</span></li>
				</ul>
			</div>
			<!-- 主体 -->
			<div class="main-body" id="main-body" :class="selectBox == true?'showTop':''">
				<div class="main-body1">
					<div class="main-body-item body-item" v-for="item in dataBagList" @click="showDetail(3,item.title,item.ftid,item.id,item.bs_id)"><img :src="item.image"/><span>{{item.title}}</span><a class="tips" v-if="getSoucre.ft_id == 2">{{item.bsid1}}</a></div>
				</div>
			</div>
			<!-- 展开资源包 -->
			<div class="resource-packages">
				<div class="close-icon" onclick="closeBag()">×</div>
				<div class="select-content">
				<div class="name1">第一批</div>
					<div class="select-content-item">
						<div class="main-body-item body-item1" id="PPT1"><a><img src="statics/images/index1.jpg"/></a><a class="tips">PPT</a><span>习近平新时代中国特色社会主义理论体系</span></div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		window.onload = function(){
			var app = new Vue({
				el:"#app",
				data:{
					// get数据传参
					getSoucre:{
						template:3,
						ft_id:0,
						kw:""
					},
					selectBox:false,
					// 默认左侧展开
					selectIndex:0,
					// 资源包
					bag:false,
					// 选中导航
					selectBarIndex:1,
					// 搜索框搜索
					searchBox:'',
					// 数据包
					dataBagList:[]
				},
				methods:{
					// 打开资源包
					openBag(){
						var that = this;
						that.bag = true;
					},
					// 顶部导航跳转
					jumpList(index){
						var that = this;
						if(index == 1){
							window.location.href='jzfp.html'
						}else{
							that.getSoucre.ft_id = index;
							that.dataBag();
						}
					},
					// 资源包
					dataBag(){
						var that = this;
						that.dataBagList = [];
						postData("special",that.getSoucre,function(res){
							if(res.code == 200){
								for(var i=0;i<res.data.type.length;i++){
									res.data.type[i].image = res.data.type[i].img || res.data.type[i].sz_img;
									if(that.getSoucre.ft_id == 2){
										if(res.data.type[i].bs_id == 1){
											res.data.type[i].bsid1 = 'PPT'
										}else if(res.data.type[i].bs_id == 2){
											res.data.type[i].bsid1 = '图文'
										}else if(res.data.type[i].bs_id == 3){
											res.data.type[i].bsid1 = '视频'
										}else if(res.data.type[i].bs_id == 4){
											res.data.type[i].bsid1 = '音频'
										}else if(res.data[i].bs_id == 8){
											res.data.type[i].bsid1 = 'PDF'
										}
									}
								}
								that.dataBagList = res.data.type;
							}
						})
					},
					// 打开资源包
					showDetail(template,title,ft_id,rid,bsid){
						var that = this;
						if(that.getSoucre.ft_id == 2){
							showDetail(bsid,rid,3,1)
						}else{
							openBag(template,title,ft_id,rid)
						}
					},
				},
				created() {
					var that = this;
					var ft_id = getUrlParam("ftid");
					that.getSoucre.ft_id = ft_id;
					that.dataBag();
				}
			})
		}
	</script>
</html>
