<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>pdf详情</title>		
		<link rel="stylesheet" type="text/css" href="css/xszc.css"/>
		<link rel="stylesheet" type="text/css" href="lib/font-awesome/css/font-awesome.css"/>
	</head>
	<body>
		<div id="app" v-cloak>
			<div class="top">
				<div class="control1">
					<a href="shyk.html"><i class="fa fa-mail-reply" aria-hidden="true"></i>返回&nbsp;&nbsp;|&nbsp;</a>
					<a href="javascript:window.location='app.html';"><i class="fa fa-home" aria-hidden="true"></i>首页</a>
				</div>
				<div class="showtitle">{{title}}</div>
			</div>
			<div class="contentImg">
				<div class="img" style="overflow: hidden;">
					<div class="showList">
						<iframe style="height: 100%;width: 100%;" allowfullscreen="true"  :src="dataUrl"></iframe>
					</div>
				</div>
				<div class="siblings">
					<div class="sbilingsTit">同系列文档</div>
					<ul class="wengdang">
						<li v-for="item in sameList" @click="changeData(item.id)"><i class="fa fa-file-pdf-o" aria-hidden="true"></i>{{item.title}}</li>
					</ul>
				</div>
			</div>
		</div>
		<script src="lib/jquery/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/setCookie.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			window.onload = function(){
				var app = new Vue({
					el:"#app",
					data:{
						id:"",
						title:"",
						dataUrl:"statics/images/loading.gif",
						sameList:[],
						pid:""
					},
					methods:{
						// 资源详情
						detail(){
							var that = this;
							postData("shykL",{id:that.pid},function(res){
								if(res.code == 200){
									for(var i=0;i<res.data.cate_info.length;i++){
										if(res.data.cate_info[i].id == that.id){
											that.title = res.data.cate_info[i].title;
											that.dataUrl = "http://"+res.data.cate_info[i].ym+'/statics/js/web/viewer.html?file='+res.data.cate_info[i].ment_url;
										}
									}
									that.sameList = res.data.cate_info;
								}
							})
						},
						// 切换资料
						changeData(id){
							var that = this;
							that.id = id;
							for(var i=0;i<that.sameList.length;i++){
								if(that.sameList[i].id == that.id){
									that.title = that.sameList[i].title;
									that.dataUrl = "http://"+that.sameList[i].ym+'/statics/js/web/viewer.html?file='+that.sameList[i].ment_url;
								}
							}
						},
					},
					created() {
						var that = this;
						that.id = getUrlParam('id');
						that.pid = getUrlParam('pid');
						that.detail();
					}
				})
			}
		</script>
	</body>
</html>
